# ==============================================
# YYC³ NAS-ECS 环境配置文件模板
# ==============================================
# 使用说明：
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 根据实际环境修改配置值
# 3. 不要将 .env 文件提交到 Git 仓库
# 4. 生产环境请使用强密码和安全的密钥
# 5. 定期轮换密钥和密码
# ==============================================

# ==============================================
# 基础设施
# ==============================================
# PostgreSQL 数据库配置
POSTGRES_USER=yyc3_nas_user
POSTGRES_PASSWORD=your-strong-postgres-password-change-me
POSTGRES_DB=yyc3_nas_db

# Redis 缓存配置
REDIS_URL=redis://redis:6379/0

# Kafka 消息队列配置
KAFKA_BROKER=kafka:9092

# ==============================================
# 邮件交互服务 (admin@0379.email)
# ==============================================
# IMAP 配置（接收邮件）
MAIL_SERVER=imap.gmail.com
MAIL_PORT=993
MAIL_USER=admin@0379.email
MAIL_PASSWORD=your-app-specific-password-change-me

# SMTP 配置（发送邮件）
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=admin@0379.email
SMTP_PASSWORD=your-app-specific-password-change-me

# ==============================================
# AI 引擎服务
# ==============================================
# OpenAI API 配置（如使用本地LLM可留空）
OPENAI_API_KEY=
LLM_MODEL=gpt-4-turbo-preview

# 本地 LLM 配置（Ollama）
LOCAL_LLM_URL=http://localhost:11434/v1
LOCAL_LLM_MODEL=deepseek-r1:7b

# ==============================================
# FRP 服务
# ==============================================
FRPC_PATH=/usr/local/bin/frpc
FRPS_CONFIG_PATH=/etc/frp/frps.toml

# ==============================================
# YYC3 NAS ECS DDNS 配置
# ============================================
# 基础配置
# ============================================
export NAS_DOMAIN="ddns.0379.email"
export NAS_SERVER_IP="8.152.195.33"
export NAS_LOCAL_IP="192.168.3.45"
export NAS_SERVER_NAME="yyc3-33"
export NAS_LOCAL_NAME="nas-local"

# ============================================
# 阿里云配置
# ============================================
export ALIYUN_ACCESS_KEY_ID="your-aliyun-access-key-id"
export ALIYUN_ACCESS_KEY_SECRET="your-aliyun-access-key-secret"
export ALIYUN_REGION_ID="cn-beijing"
export ALIYUN_DOMAIN="0379.email"
export ALIYUN_SUB_DOMAIN="ddns"
export ALIYUN_TTL="600"

# ============================================
# 路径配置
# ============================================
export NAS_BASE_DIR="/opt/yyc3"
export NAS_SCRIPTS_DIR="${NAS_BASE_DIR}/scripts"
export NAS_DDNS_DIR="${NAS_BASE_DIR}/ddns"
export NAS_WEB_DIR="${NAS_BASE_DIR}/web/nas"
export NAS_LOGS_DIR="${NAS_BASE_DIR}/logs"
export NAS_REPORTS_DIR="${NAS_BASE_DIR}/reports"
export NAS_RUN_DIR="${NAS_BASE_DIR}/run"
export NAS_BACKUP_DIR="${NAS_BASE_DIR}/backup"

# ============================================
# 服务配置
# ============================================
export DDNS_CHECK_INTERVAL="300"           # DDNS检查间隔（秒）
export MONITOR_CHECK_INTERVAL="1800"       # 监控检查间隔（秒）
export REPORT_GENERATE_TIME="08:00"        # 报告生成时间
export LOG_RETENTION_DAYS="7"              # 日志保留天数
export REPORT_RETENTION_DAYS="30"          # 报告保留天数

# ============================================
# Nginx配置
# ============================================
export NGINX_CONF_DIR="/etc/nginx/conf.d"
export NGINX_CONF_FILE="${NGINX_CONF_DIR}/ddns.0379.email.conf"
export NGINX_LOG_DIR="/var/log/nginx"
export NGINX_ACCESS_LOG="${NGINX_LOG_DIR}/nas_access.log"
export NGINX_ERROR_LOG="${NGINX_LOG_DIR}/nas_error.log"
export NGINX_PORT="80"

# ============================================
# 系统服务配置
# ============================================
export SYSTEMD_SERVICE_DIR="/etc/systemd/system"
export DDNS_SERVICE="yyc3-ddns.service"
export DDNS_TIMER="yyc3-ddns.timer"
export MONITOR_SERVICE="nas-monitor.service"
export MONITOR_TIMER="nas-monitor.timer"
export REPORT_SERVICE="nas-daily-report.service"
export REPORT_TIMER="nas-daily-report.timer"

# ============================================
# 监控配置
# ============================================
export MONITOR_ENABLED="true"
export MONITOR_CHECK_DNS="true"
export MONITOR_CHECK_HTTP="true"
export MONITOR_CHECK_SERVICES="true"
export MONITOR_CHECK_RESOURCES="true"
export MONITOR_ALERT_THRESHOLD_CPU="90"
export MONITOR_ALERT_THRESHOLD_MEM="90"
export MONITOR_ALERT_THRESHOLD_DISK="90"

# ============================================
# 通知配置（待配置）
# ============================================
export NOTIFICATION_ENABLED="false"
export NOTIFICATION_TYPE=""                # email/telegram/slack
export NOTIFICATION_EMAIL="admin@0379.email"
export NOTIFICATION_TELEGRAM_BOT_TOKEN=""
export NOTIFICATION_TELEGRAM_CHAT_ID=""

# ============================================
# 备份配置
# ============================================
export BACKUP_ENABLED="true"
export BACKUP_SCHEDULE="0 2 * * *"         # 每天2:00备份
export BACKUP_RETENTION_DAYS="7"

# ============================================
# 安全配置
# ============================================
export SECURITY_ENABLE_FIREWALL="true"
export SECURITY_ALLOWED_IPS=""
export SECURITY_RATE_LIMIT="100r/s"
export SECURITY_BLOCK_FAILED_ATTEMPTS="5"

# ============================================
# 颜色配置（用于脚本输出）
# ============================================
export COLOR_RED='\033[0;31m'
export COLOR_GREEN='\033[0;32m'
export COLOR_YELLOW='\033[1;33m'
export COLOR_BLUE='\033[0;34m'
export COLOR_PURPLE='\033[0;35m'
export COLOR_CYAN='\033[0;36m'
export COLOR_WHITE='\033[1;37m'
export COLOR_RESET='\033[0m'

# ============================================
# 版本信息
# ============================================
export NAS_DDNS_VERSION="1.0.0"
export NAS_DDNS_BUILD_DATE="$(date '+%Y%m%d')"
export NAS_DDNS_AUTHOR="System Admin"
export NAS_DDNS_DESCRIPTION="NAS DDNS and Proxy System"

# ==============================================
# API 服务配置
# ==============================================
# JWT 配置
JWT_SECRET_KEY=your-jwt-secret-key-change-me-in-production
JWT_EXPIRES_IN=7d

# CORS 配置
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,https://ddns.0379.email

# API 端口配置
API_PORT=3200
API_HOST=0.0.0.0

# ==============================================
# 应用配置
# ==============================================
# 应用环境
NODE_ENV=development

# 日志级别
LOG_LEVEL=debug

# 会话配置
SESSION_SECRET=your-session-secret-change-me
SESSION_MAX_AGE=86400

# ==============================================
# 监控和告警
# ==============================================
# 健康检查配置
HEALTH_CHECK_INTERVAL=60
HEALTH_CHECK_TIMEOUT=30

# 告警配置
ALERT_ENABLED=true
ALERT_EMAIL=admin@0379.email
ALERT_WEBHOOK_URL=

# ==============================================
# 备份配置
# ==============================================
# 备份存储
BACKUP_STORAGE_TYPE=local
BACKUP_LOCAL_PATH=/opt/yyc3/backup
BACKUP_S3_BUCKET=
BACKUP_S3_REGION=
BACKUP_S3_ACCESS_KEY=
BACKUP_S3_SECRET_KEY=

# ==============================================
# 性能优化
# ==============================================
# 缓存配置
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# 连接池配置
DB_POOL_MIN=2
DB_POOL_MAX=10
REDIS_POOL_SIZE=10

# ==============================================
# 安全配置
# ==============================================
# 密码策略
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_REQUIRE_SPECIAL=true

# 会话安全
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# 速率限制
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX_REQUESTS=100

# ==============================================
# 开发工具配置
# ==============================================
# 调试模式
DEBUG=true

# 热重载
HOT_RELOAD=true

# 源码映射
SOURCE_MAPS=true
