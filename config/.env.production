# =====================================================
# YYC³ 生产环境配置
# 继承自: config/.env.base
# 创建日期: 2025-01-05
# 版本: 1.0.0
# =====================================================

# -----------------------------------------------------
# 环境标识
# -----------------------------------------------------
ENVIRONMENT=production
NODE_ENV=production
VITE_APP_ENV=production
FLASK_ENV=production

# -----------------------------------------------------
# 前端配置
# -----------------------------------------------------
VITE_API_BASE_URL=https://api.0379.email
VITE_MAIL_API_URL=https://mail.0379.email
VITE_LLM_API_URL=https://llm.0379.email
VITE_REDIS_API_URL=https://redis.0379.email
VITE_DDNS_API_URL=https://ddns.0379.email
VITE_FRP_API_URL=https://frp.0379.email
VITE_FRP_ADMIN_URL=https://frp-admin.0379.email
VITE_NAS_API_URL=https://nas.0379.email

VITE_WS_URL=wss://api.0379.email
VITE_WS_RECONNECT_INTERVAL=10000
VITE_WS_MAX_RECONNECT_ATTEMPTS=10

VITE_AUTH_JWT_SECRET=prod-jwt-secret-2026-change-me
VITE_AUTH_TOKEN_STORAGE=localStorage
VITE_AUTH_REFRESH_TOKEN_ENABLED=true

VITE_ENABLE_MOCK_DATA=false
VITE_ENABLE_DEBUG=false
VITE_ENABLE_PERFORMANCE_MONITORING=true
VITE_ENABLE_ERROR_TRACKING=true

VITE_LOG_LEVEL=error
VITE_LOG_TO_CONSOLE=false
VITE_LOG_TO_SERVER=true

VITE_CACHE_ENABLED=true
VITE_CACHE_TTL=600000
VITE_DEBOUNCE_DELAY=500

VITE_THEME=default
VITE_LANGUAGE=zh-CN
VITE_TIMEZONE=Asia/Shanghai

VITE_ENABLE_DEVTOOLS=false
VITE_ENABLE_HOT_RELOAD=false
VITE_SOURCE_MAP=false

# -----------------------------------------------------
# 后端配置
# -----------------------------------------------------
DEBUG=false
TESTING=false

FLASK_DEBUG=false
FLASK_TESTING=false

# 数据库URL - 将从 secrets 加载密码
DATABASE_URL=postgresql://nas_admin:${POSTGRES_PASSWORD}@postgres:5432/nas_ddns
SQLALCHEMY_ECHO=false
SQLALCHEMY_RECORD_QUERIES=false

# Redis URL - 将从 secrets 加载密码
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
REDIS_TLS=false

# -----------------------------------------------------
# API配置
# -----------------------------------------------------
API_PREFIX=/api/v2
API_VERSION=2.0.0
API_TIMEOUT=30000
API_RATE_LIMIT=100

# -----------------------------------------------------
# 生产服务器配置
# -----------------------------------------------------
FRONTEND_PROD_PORT=6005
FRONTEND_PROD_HOST=0.0.0.0

API_PROD_PORT=6000
API_PROD_HOST=0.0.0.0

MAIL_PROD_PORT=6003
MAIL_PROD_HOST=0.0.0.0

LLM_PROD_PORT=6002
LLM_PROD_HOST=0.0.0.0

REDIS_PROD_PORT=6379
REDIS_PROD_HOST=0.0.0.0

# -----------------------------------------------------
# Mock配置（生产环境禁用）
# -----------------------------------------------------
USE_MOCK_DATA=false
MOCK_DELAY=0
MOCK_ERROR_RATE=0

# -----------------------------------------------------
# 监控配置（生产环境）
# -----------------------------------------------------
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000

# Sentry配置 - 将从 secrets 加载
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_SERVER_NAME=nas-0379

# -----------------------------------------------------
# 邮件配置（生产环境）
# -----------------------------------------------------
# 将从 secrets 加载真实配置
MAIL_SMTP_HOST=${MAIL_SMTP_HOST}
MAIL_SMTP_PORT=${MAIL_SMTP_PORT}
MAIL_SMTP_SECURE=${MAIL_SMTP_SECURE}
MAIL_SMTP_TLS=${MAIL_SMTP_TLS}
MAIL_SMTP_AUTH=${MAIL_SMTP_AUTH}
MAIL_SMTP_USERNAME=${MAIL_SMTP_USERNAME}
MAIL_SMTP_PASSWORD=${MAIL_SMTP_PASSWORD}
MAIL_SMTP_POOL_SIZE=20
MAIL_SMTP_SOCKET_TIMEOUT=60000

MAIL_IMAP_HOST=${MAIL_IMAP_HOST}
MAIL_IMAP_PORT=${MAIL_IMAP_PORT}
MAIL_IMAP_SECURE=${MAIL_IMAP_SECURE}
MAIL_IMAP_AUTH=${MAIL_IMAP_AUTH}
MAIL_IMAP_USERNAME=${MAIL_IMAP_USERNAME}
MAIL_IMAP_PASSWORD=${MAIL_IMAP_PASSWORD}
MAIL_IMAP_MAX_CONNECTIONS=10

# 企业级邮件功能
MAIL_ENABLE_DKIM=true
MAIL_DKIM_DOMAIN=0379.email
MAIL_DKIM_SELECTOR=mail
MAIL_DKIM_PRIVATE_KEY_PATH=/etc/mail/dkim/private.key
MAIL_ENABLE_SPF=true
MAIL_ENABLE_DMARC=true

MAIL_QUOTA_ENABLED=true
MAIL_QUOTA_DEFAULT=5000
MAIL_QUOTA_MAX=20000

MAIL_SPAM_FILTER_ENABLED=true
MAIL_VIRUS_SCAN_ENABLED=true
MAIL_CONTENT_FILTER_ENABLED=true

# 邮件队列配置
MAIL_QUEUE_ENABLED=true
MAIL_QUEUE_PATH=/var/mail/queue
MAIL_QUEUE_RETRY_INTERVAL=300
MAIL_QUEUE_MAX_RETRIES=5

# -----------------------------------------------------
# LLM配置（生产环境）
# -----------------------------------------------------
# 将从 secrets 加载API密钥
OPENAI_API_KEY=${OPENAI_API_KEY}
OPENAI_API_URL=https://api.openai.com/v1
OPENAI_DEFAULT_MODEL=gpt-4
OPENAI_MAX_TOKENS=2048
OPENAI_TEMPERATURE=0.7
OPENAI_TIMEOUT=30

LOCAL_LLM_ENABLED=false
LOCAL_LLM_URL=http://localhost:11434
LOCAL_LLM_MODEL=mistral

# -----------------------------------------------------
# FRP配置（生产环境）
# -----------------------------------------------------
# 将从 secrets 加载Token
FRP_AUTH_METHOD=token
FRP_AUTH_TOKEN=${FRP_AUTH_TOKEN}

FRP_CLIENT_CONFIG_PATH=/etc/frp/frpc.toml
FRP_CLIENT_LOG_PATH=/var/log/frpc.log
FRP_CLIENT_LOG_LEVEL=info

FRP_DASHBOARD_PORT=7500
FRP_DASHBOARD_USERNAME=${FRP_DASHBOARD_USERNAME}
FRP_DASHBOARD_PASSWORD=${FRP_DASHBOARD_PASSWORD}

FRP_TLS_ENABLED=true

# -----------------------------------------------------
# DDNS配置（生产环境）
# -----------------------------------------------------
# 将从 secrets 加载密钥
DDNS_PROVIDER=aliyun
DDNS_DOMAIN=0379.email
DDNS_SUBDOMAIN=ddns

ALIYUN_ACCESS_KEY_ID=${ALIYUN_ACCESS_KEY_ID}
ALIYUN_ACCESS_KEY_SECRET=${ALIYUN_ACCESS_KEY_SECRET}
ALIYUN_REGION_ID=cn-beijing
ALIYUN_TTL=600

DDNS_LOG_PATH=/var/log/ddns.log

# -----------------------------------------------------
# NAS配置（生产环境）
# -----------------------------------------------------
NAS_SERVER_HOST=nas.0379.email
NAS_SERVER_PORT=5000
NAS_PROTOCOL=smb
NAS_USERNAME=${NAS_USERNAME}
NAS_PASSWORD=${NAS_PASSWORD}

NAS_ROOT_PATH=/volume1
NAS_SHARES_ENABLED=true
NAS_AUTO_BACKUP=true
NAS_BACKUP_PATH=/volume1/backup
NAS_BACKUP_INTERVAL=86400

# -----------------------------------------------------
# 安全配置（生产环境）
# -----------------------------------------------------
SECURE_COOKIE=true
CSRF_ENABLED=true
CSRF_SECRET=${CSRF_SECRET}

# API认证配置
API_JWT_SECRET=${API_JWT_SECRET}
API_JWT_EXPIRES_IN=7d

# 密钥轮换配置
KEY_ROTATION_ENABLED=true
KEY_ROTATION_INTERVAL=2592000  # 30天

# -----------------------------------------------------
# 备份配置（生产环境）
# -----------------------------------------------------
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=7
BACKUP_PATH=/backup/yyc3
BACKUP_COMPRESSION=true

# -----------------------------------------------------
# 日志配置（生产环境）
# -----------------------------------------------------
LOG_LEVEL=error
LOG_FILE_MAX_SIZE=100MB
LOG_FILE_MAX_BACKUPS=10
LOG_FILE_RETENTION_DAYS=30

# -----------------------------------------------------
# 测试配置（生产环境禁用）
# -----------------------------------------------------
TESTING_ENABLED=false
TEST_DATABASE_URL=
TEST_REDIS_URL=
