# Redis Config Workspace · 全量环境变量示例（复制为 .env.local 使用）
# 适配“开发环境智能协同一体化”：统一端口、密码、健康检查、时区与 NAS 路径。

# ===== 基本环境 =====
TZ=Asia/Shanghai
DOCKER_PLATFORM=linux/arm64/v8

# ===== 端口（宿主） =====
# 开发容器：宿主 REDIS_DEV_PORT -> 容器 6380（compose 中固定）
REDIS_DEV_PORT=6381
# 生产容器：宿主 REDIS_PROD_PORT -> 容器 6379（compose 中固定）
REDIS_PROD_PORT=6380
# API 映射端口（Compose 专用；复制到 config/.env 使用）
API_DEV_PORT=3000
API_PROD_PORT=3001

# ===== 安全（生产） =====
# 生产密码：需与 config/redis-prod.conf 中 requirepass 保持一致
REDIS_PROD_PASSWORD=redis_yyc3
# 安全校验模式：1=弱校验（默认，本地便利优先），0=严格校验（要求禁用高危命令）
ALLOW_WEAK_PROD=1

# ===== 健康检查（脚本参数） =====
# 尝试次数与延迟毫秒（宿主与容器内均会执行 ping）
REDIS_HEALTH_ATTEMPTS=10
REDIS_HEALTH_DELAY=500

# ===== NAS/日志路径（本地协同） =====
# 脚本 ensure_nas 使用 NAS_DEV_DIR；如未设置，默认 $HOME/nas/volume2/redis/dev/data
NAS_DEV_DIR=/Users/yanyu/nas/volume2/redis/dev/data
NAS_PROD_DIR=/Users/yanyu/nas/volume2/redis/prod/data
# 可选：本地日志目录（供参考，compose 已挂载 logs/ 子目录）
LOG_DEV_DIR=/Users/yanyu/Projects/redis-config/logs/dev
LOG_PROD_DIR=/Users/yanyu/Projects/redis-config/logs/prod

# ===== 使用提示 =====
# - 复制本文件为 .env.local 后即被 scripts/redis-manager.sh 自动加载
# - 修改 REDIS_PROD_PASSWORD 时：同步更新 redis-prod.conf 的 requirepass
# - 严格模式：将 ALLOW_WEAK_PROD=0 并运行 bash scripts/check-redis-prod.sh
# - 启动示例：bash scripts/redis-manager.sh start --mode docker --env dev|prod
# - 健康检查：bash scripts/redis-manager.sh health --env dev|prod
